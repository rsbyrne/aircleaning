<!DOCTYPE html>
<script>
  function initialise_tooltips() {
    const tooltips = Array.from(document.querySelectorAll("tooltip"));
    let originator;
    let destination;
    tooltips.forEach((tooltip) => {
      originator = tooltip.firstElementChild;
      destination = tooltip.lastElementChild;
      originator.addEventListener("mouseenter", (event) => {
        destination.classList.remove("tooltip-inactive");
        destination.classList.add("tooltip-active");
        destination.style.left = `${originator.pageX}px`;
        destination.style.top = `${originator.pageY}px`;
        });
      tooltip.addEventListener('mouseleave', () => {
        destination.classList.remove("tooltip-active");
        destination.classList.add("tooltip-inactive");
        });
      });
    };
  function openPane(evt, paneClass, paneName) {
    // Declare all variables
    var i, tabcontent, tablinks;
    // Get all elements with class=<paneClass> and hide them
    tabcontent = document.getElementsByClassName(paneClass);
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
      }
    // Get all elements with class="<paneClass>_button"
    // and remove the class "active"
    tablinks = document.getElementsByClassName(paneClass+"_button");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    // Show the current tab
    // and add an "active" class to the button that opened the tab
    document.getElementById(paneName).style.display = "block";
    evt.currentTarget.className += " active";
    }
  </script>
<style>
  tooltip-originator {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted blue;
    cursor: help;
    }
  tooltip-destination {
    padding: 15px;
    box-shadow: 0px 0px 10px black;
    position: absolute;
    z-index: 100;  display: none;  opacity: 0;
    }
  @keyframes tooltip-active-anim {
    0% {
      opacity: 0;
      }  100% {
      opacity: 1;
      }
    }
  .tooltip-active {
    display: block;
    animation: tooltip-active-anim 0.2s linear forwards;
    }
  @keyframes tooltip-inactive-anim {
    0% {
      opacity: 1;
      }  100% {
      opacity: 0;
      }
    }
  .tooltip-inactive {
    display: block;
    animation: tooltip-inactive-anim 0.2s linear forwards;
    }
  /* Style the tab */
  .pane_selector {
    overflow: hidden;
    justify-items:center;}
  /* Style the buttons that are used to open the tab content */
  .pane_selector button {
    background-color: #f1f1f1;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14p 16px;
    transition: 0.3s;
  }
  /* Change background color of buttons on hover */
  .pane_selector button:hover {
    background-color: #ddd;
  }
  /* Create an active/current tablink class */
  .pane_selector button.active {
    background-color: #ccc;
  }
  /* Style the tab content */
  .input_selector_pane {
    display: none;
    padding: 6px 12px;
    animation: fadeEffect 0.5s;
  }
  @keyframes fadeEffect {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  /* Style the tab content */
  .tool_selector_pane {
    display: none;
    padding: 6px 12px;
    animation: fadeEffect 0.5s;
  }
  </style>
<head>
  <meta charset="UTF-8">
  <title>None</title>
  </head>
<html
    name="id_139878023407312"
    id="id_139878023407312"
    class="solid"
    lang="en"
    >
  <body>
    <script
        name="id_139878023749440"
        id="id_139878023749440"
        >
      function calculate_natural_vent_rate(windows, doors){
        const wind_speed = 3;
        const window_area = 0.5 * 0.8 * windows;
        const door_area = 0.6 * 1.9 * doors;
        if (windows>0 && doors>0) {
            var coeff = 0.1;
            var aperture = Math.min(window_area, door_area);
          } else {
            var coeff = 0.01;
            var aperture = Math.max(window_area, door_area);
          };
        return coeff * wind_speed * aperture * 3600;
        };
      function calculate_mech_vent_rate(mech, volume){
        return mech * 6 * volume;
        };
      function calculate_vent_rate(windows, doors, mech, volume){
        const natural = calculate_natural_vent_rate(windows, doors);
        const mechanical = calculate_mech_vent_rate(mech, volume);
        const baseline = 3 * volume;
        return natural + mechanical + baseline
        };
      function calculate_fouling_rate(persons, activity, volume){
        const multiplier = [1, 3, 10][activity];
        const policy_1 = 0.35 * multiplier * volume * persons;
        const l_s_pp = 10;
        const m3_h_pp = l_s_pp * 3600 / 1000;
        const policy_2 = multiplier * m3_h_pp * persons;
        return Math.max(policy_1, policy_2)
        };
      </script>
    <script
        name="id_139878023775616"
        id="id_139878023775616"
        >
      function form_update(form){
        const productsdir = "https://rsbyrne.github.io/aircleaning/products";
        const length = form.room_length.value;
        const width = form.room_width.value;
        const height = form.room_height.value;
        const windows = form.number_windows.value;
        const doors = form.number_doors.value;
        const persons = form.number_people.value;
        const room = document.getElementById('room_viz');
        const mech = form.mech_vent.value;
        const activity = parseInt(form.activity_level.value);
        room.src =
          productsdir + "/rooms/" +
          [length, width, height, persons, activity, windows, doors, mech].join("_")
          + ".svg";
        const volume = form.room_length.value * form.room_width.value * form.room_height.value;
        document.getElementById("total_volume").innerHTML = volume;
        const vent_rate = calculate_vent_rate(windows, doors, mech, volume);
        const provided_cleaning = Math.round(vent_rate / volume);
        document.getElementById("provided_cleaning").innerHTML = provided_cleaning;
        const fouling_rate = calculate_fouling_rate(persons, activity, volume);
        const required_cleaning = Math.max(4, Math.round(fouling_rate / volume));
        document.getElementById("required_cleaning").innerHTML = required_cleaning;
        const extra_cleaning = Math.max(0, required_cleaning - provided_cleaning);
        document.getElementById("extra_cleaning").innerHTML = extra_cleaning;
        const extra_cleaning_cadr = Math.ceil(Math.min(15, extra_cleaning) * volume / 100) * 100;
        document.getElementById("extra_cleaning_cadr").innerHTML = extra_cleaning_cadr;
        const acchart = document.getElementById("air_cleaner_recommendations");
        acchart.src =
          productsdir + "/costs/" +
          Math.max(100, extra_cleaning_cadr)
          + ".png";
        }
      </script>
    <style
        name="id_139878023774656"
        id="id_139878023774656"
        >
      .solid {
        color: black;  background-color: white;
        };
      .input-fieldset {
        };
      </style>
    <div
        name="id_139878023611008"
        id="id_139878023611008"
        class="solid"
        style="display: flex;justify-items: center;flex-wrap: wrap;align-items: center;justify-content: center"
        >
      <div
          name="id_139878023599968"
          id="id_139878023599968"
          style="display: grid;grid-template-rows: 25% 7% 68%;max-height: 11.7in;max-width: 8.3in"
          >
        <div
            name="id_139878023744768"
            id="id_139878023744768"
            style="display: grid;grid-template-columns: 60% 40%;overflow:auto"
            >
          <form
              name="user_form"
              id="user_form"
              >
            <div
                name="input_selector"
                id="input_selector"
                >
              <div
                  name="id_139878023745152"
                  id="id_139878023745152"
                  class="pane_selector"
                  style="width: 100%;"
                  >
                <button
                    name="input_selector_button_0"
                    id="input_selector_button_0"
                    class="input_selector_pane_button"
                    onclick="openPane(event, 'input_selector_pane', 'id_139878023406528')"
                    type=button
                    >
                  Dimensions
                  </button>
                <button
                    name="input_selector_button_1"
                    id="input_selector_button_1"
                    class="input_selector_pane_button"
                    onclick="openPane(event, 'input_selector_pane', 'id_139878023406640')"
                    type=button
                    >
                  Usage
                  </button>
                <button
                    name="input_selector_button_2"
                    id="input_selector_button_2"
                    class="input_selector_pane_button"
                    onclick="openPane(event, 'input_selector_pane', 'id_139878023406752')"
                    type=button
                    >
                  Circulation
                  </button>
                </div>
              <div
                  name="id_139878023743136"
                  id="id_139878023743136"
                  class="pane_space"
                  >
                <div
                    name="id_139878023406528"
                    id="id_139878023406528"
                    class="input_selector_pane"
                    >
                  <fieldset
                      title="Dimensions"
                      name="room_size"
                      id="id_139878023876048"
                      class="-" "d" "e" "f" "i" "l" "n" "p" "s" "t" "u"
                      >
                    <legend
                        name="id_139878023775040"
                        id="id_139878023775040"
                        >
                      How big is your room?
                      </legend>
                    <div
                        name="id_139878023810288"
                        id="id_139878023810288"
                        >
                      <label
                          name="id_139878023774368_label"
                          id="id_139878023774368_label"
                          for="id_139878023774368"
                          >
                        Length (m):
                        </label>
                      <div
                          name="id_139878023774368"
                          id="id_139878023774368"
                          >
                        <input
                            name="room_length"
                            id="id_139878023918528"
                            style="width: 90%"
                            oninput="this.nextElementSibling.value=this.value;form_update(this.form)"
                            min=4
                            max=7
                            step=1
                            type="range"
                            value="5"
                            oninput="form_update(this.form)"
                            >
                        <output
                            name="id_139878023918640"
                            id="id_139878023918640"
                            for="id_139878023918528"
                            >
                          5
                          </output>
                        </div>
                      </div>
                    <div
                        name="id_139878023810736"
                        id="id_139878023810736"
                        >
                      <label
                          name="id_139878023774560_label"
                          id="id_139878023774560_label"
                          for="id_139878023774560"
                          >
                        Width (m):
                        </label>
                      <div
                          name="id_139878023774560"
                          id="id_139878023774560"
                          >
                        <input
                            name="room_width"
                            id="id_139878023875264"
                            style="width: 90%"
                            oninput="this.nextElementSibling.value=this.value;form_update(this.form)"
                            min=4
                            max=7
                            step=1
                            type="range"
                            value="4"
                            oninput="form_update(this.form)"
                            >
                        <output
                            name="id_139878023875712"
                            id="id_139878023875712"
                            for="id_139878023875264"
                            >
                          4
                          </output>
                        </div>
                      </div>
                    <div
                        name="id_139878023810624"
                        id="id_139878023810624"
                        >
                      <label
                          name="id_139878023774272_label"
                          id="id_139878023774272_label"
                          for="id_139878023774272"
                          >
                        Height (m):
                        </label>
                      <div
                          name="id_139878023774272"
                          id="id_139878023774272"
                          >
                        <input
                            name="room_height"
                            id="id_139878023876160"
                            style="width: 90%"
                            oninput="this.nextElementSibling.value=this.value;form_update(this.form)"
                            min=2
                            max=4
                            step=1
                            type="range"
                            value="2"
                            oninput="form_update(this.form)"
                            >
                        <output
                            name="id_139878023875600"
                            id="id_139878023875600"
                            for="id_139878023876160"
                            >
                          2
                          </output>
                        </div>
                      </div>
                    <div
                        name="id_139878023775808"
                        id="id_139878023775808"
                        style="margin-upper:10px"
                        >
                      <div
                          name="id_139878023775712"
                          id="id_139878023775712"
                          style="float: left; width:70%; margin-right:10px"
                          >
                        Total volume (m<sup>3</sup>):
                        </div>
                      <div
                          name="total_volume"
                          id="total_volume"
                          style="float: left;width:20%"
                          >
                        -
                        </div>
                      </div>
                    </fieldset>
                  </div>
                <div
                    name="id_139878023406640"
                    id="id_139878023406640"
                    class="input_selector_pane"
                    >
                  <fieldset
                      title="Usage"
                      name="room_usage"
                      id="id_139878023547472"
                      class="-" "d" "e" "f" "i" "l" "n" "p" "s" "t" "u"
                      >
                    <legend
                        name="id_139878023745344"
                        id="id_139878023745344"
                        >
                      How is the room being used?
                      </legend>
                    <div
                        name="id_139878023545344"
                        id="id_139878023545344"
                        >
                      <label
                          name="id_139878023743328_label"
                          id="id_139878023743328_label"
                          for="id_139878023743328"
                          >
                        Number of people:
                        </label>
                      <div
                          name="id_139878023743328"
                          id="id_139878023743328"
                          >
                        <input
                            name="number_people"
                            id="id_139878023809504"
                            style="width: 90%"
                            oninput="this.nextElementSibling.value=this.value;form_update(this.form)"
                            min=1
                            max=5
                            step=1
                            type="range"
                            value="1"
                            oninput="form_update(this.form)"
                            >
                        <output
                            name="id_139878023876384"
                            id="id_139878023876384"
                            for="id_139878023809504"
                            >
                          1
                          </output>
                        </div>
                      </div>
                    <div
                        name="id_139878023546688"
                        id="id_139878023546688"
                        >
                      <label
                          name="id_139878023743616_label"
                          id="id_139878023743616_label"
                          for="id_139878023743616"
                          >
                        Level of activity:
                        </label>
                      <div
                          name="id_139878023743616"
                          id="id_139878023743616"
                          style="margin:10px"
                          >
                        <div
                            name="id_139878023743808"
                            id="id_139878023743808"
                            style="display:flex;justify-content:center;align-items:center"
                            >
                          <div
                              name="id_139878023547024"
                              id="id_139878023547024"
                              style="padding-left:10px;padding-right:10px"
                              >
                            <label
                                name="id_139878023547360_label"
                                id="id_139878023547360_label"
                                for="id_139878023547360"
                                >
                              Relaxed
                              </label>
                            <input
                                name="activity_level"
                                id="id_139878023547360"
                                checked
                                type="radio"
                                value="0"
                                oninput="form_update(this.form)"
                                >
                            </div>
                          <div
                              name="id_139878023545120"
                              id="id_139878023545120"
                              style="padding-left:10px;padding-right:10px"
                              >
                            <label
                                name="id_139878023545008_label"
                                id="id_139878023545008_label"
                                for="id_139878023545008"
                                >
                              Moderate
                              </label>
                            <input
                                name="activity_level"
                                id="id_139878023545008"
                                type="radio"
                                value="1"
                                oninput="form_update(this.form)"
                                >
                            </div>
                          <div
                              name="id_139878023546128"
                              id="id_139878023546128"
                              style="padding-left:10px;padding-right:10px"
                              >
                            <label
                                name="id_139878023547248_label"
                                id="id_139878023547248_label"
                                for="id_139878023547248"
                                >
                              Intense
                              </label>
                            <input
                                name="activity_level"
                                id="id_139878023547248"
                                type="radio"
                                value="2"
                                oninput="form_update(this.form)"
                                >
                            </div>
                          </div>
                        </div>
                      </div>
                    <div
                        name="id_139878023742272"
                        id="id_139878023742272"
                        style="margin-upper:10px"
                        >
                      <div
                          name="id_139878023742848"
                          id="id_139878023742848"
                          style="float: left;width:70%;margin-right:10px"
                          >
                        Required cleaning (ACH):
                        </div>
                      <div
                          name="required_cleaning"
                          id="required_cleaning"
                          style="float: left;width:20%"
                          >
                        -
                        </div>
                      </div>
                    </fieldset>
                  </div>
                <div
                    name="id_139878023406752"
                    id="id_139878023406752"
                    class="input_selector_pane"
                    >
                  <fieldset
                      title="Circulation"
                      name="room_cleaning"
                      id="id_139878023405632"
                      class="-" "d" "e" "f" "i" "l" "n" "p" "s" "t" "u"
                      >
                    <legend
                        name="id_139878023744000"
                        id="id_139878023744000"
                        >
                      <tooltip
                          name="id_139878023546464"
                          id="id_139878023546464"
                          >
                        <tooltip-originator
                            name="id_139878023742560"
                            id="id_139878023742560"
                            >
                          How much cleaning is already available?
                          </tooltip-originator>
                        <tooltip-destination
                            name="id_139878023742368"
                            id="id_139878023742368"
                            class="solid"
                            >
                          This is a tooltip.
                          </tooltip-destination>
                        </tooltip>
                      </legend>
                    <div
                        name="id_139878023405856"
                        id="id_139878023405856"
                        >
                      <label
                          name="id_139878023745248_label"
                          id="id_139878023745248_label"
                          for="id_139878023745248"
                          >
                        Number of open windows:
                        </label>
                      <div
                          name="id_139878023745248"
                          id="id_139878023745248"
                          >
                        <input
                            name="number_windows"
                            id="id_139878023547584"
                            style="width: 90%"
                            oninput="this.nextElementSibling.value=this.value;form_update(this.form)"
                            min=0
                            max=5
                            step=1
                            type="range"
                            value="0"
                            oninput="form_update(this.form)"
                            >
                        <output
                            name="id_139878023257328"
                            id="id_139878023257328"
                            for="id_139878023547584"
                            >
                          0
                          </output>
                        </div>
                      </div>
                    <div
                        name="id_139878023406080"
                        id="id_139878023406080"
                        >
                      <label
                          name="id_139878023743904_label"
                          id="id_139878023743904_label"
                          for="id_139878023743904"
                          >
                        Number of open doors:
                        </label>
                      <div
                          name="id_139878023743904"
                          id="id_139878023743904"
                          >
                        <input
                            name="number_doors"
                            id="id_139878023257552"
                            style="width: 90%"
                            oninput="this.nextElementSibling.value=this.value;form_update(this.form)"
                            min=0
                            max=2
                            step=1
                            type="range"
                            value="0"
                            oninput="form_update(this.form)"
                            >
                        <output
                            name="id_139878023257664"
                            id="id_139878023257664"
                            for="id_139878023257552"
                            >
                          0
                          </output>
                        </div>
                      </div>
                    <div
                        name="id_139878023406304"
                        id="id_139878023406304"
                        >
                      <label
                          name="id_139878023257888_label"
                          id="id_139878023257888_label"
                          for="id_139878023257888"
                          >
                        Mechanical ventilation:
                        </label>
                      <div
                          name="id_139878023257888"
                          id="id_139878023257888"
                          style="display:flex;justify-content:center;align-items:center"
                          >
                        <label
                            name="id_139878023257776_label"
                            id="id_139878023257776_label"
                            for="id_139878023257776"
                            >
                          Yes
                          </label>
                        <input
                            name="mech_vent"
                            id="id_139878023257776"
                            type="checkbox"
                            value="0"
                            onclick="if (this.value==0){this.value=1}else{this.value=0};form_update(this.form)"
                            >
                        </div>
                      </div>
                    <div
                        name="id_139878023744192"
                        id="id_139878023744192"
                        style="margin-upper:10px"
                        >
                      <div
                          name="id_139878023743424"
                          id="id_139878023743424"
                          style="float: left;width:70%;margin-right:10px"
                          >
                        Provided cleaning (ACH):
                        </div>
                      <div
                          name="provided_cleaning"
                          id="provided_cleaning"
                          style="float: left;width:20%"
                          >
                        -
                        </div>
                      </div>
                    </fieldset>
                  </div>
                </div>
              </div>
            </form>
          <div
              name="id_139878023742944"
              id="id_139878023742944"
              >
            <img
                name="room_viz"
                id="room_viz"
                style="max-width:100%;max-height:100%"
                src="https://via.placeholder.com/150"
                alt=""
                >
            </div>
          </div>
        <div
            name="id_139878023209024"
            id="id_139878023209024"
            >
          <div
              name="id_139878023209120"
              id="id_139878023209120"
              style="display: grid;grid-template-rows: 30px 1fr;justify-items: center"
              >
            <div
                name="id_139878023745440"
                id="id_139878023745440"
                style="display:flex;justify-items:center"
                >
              <b>Extra cleaning required:</b>
              </div>
            <div
                name="id_139878023209696"
                id="id_139878023209696"
                style="display: grid;grid-template-rows: 1fr 1fr"
                >
              <div
                  name="id_139878023744576"
                  id="id_139878023744576"
                  style="display: grid;grid-template-columns: 1fr 1fr;justify-items:center"
                  >
                <div
                    name="id_139878023744672"
                    id="id_139878023744672"
                    >
                  <i>Air changes (ACH):</i>
                  </div>
                <div
                    name="extra_cleaning"
                    id="extra_cleaning"
                    >
                  -
                  </div>
                </div>
              <div
                  name="id_139878023209312"
                  id="id_139878023209312"
                  style="display: grid;grid-template-columns: 1fr 1fr;justify-items:center"
                  >
                <div
                    name="id_139878023744960"
                    id="id_139878023744960"
                    >
                  <i>CADR (m<sup>3</sup>/hr):</i>
                  </div>
                <div
                    name="extra_cleaning_cadr"
                    id="extra_cleaning_cadr"
                    >
                  -
                  </div>
                </div>
              </div>
            </div>
          </div>
        <div
            name="id_139878023800672"
            id="id_139878023800672"
            style="display: grid;grid-template-rows: 1fr 3fr"
            >
          <div
              name="tool_selector"
              id="tool_selector"
              >
            <div
                name="id_139878023209792"
                id="id_139878023209792"
                class="pane_selector"
                style="width: 100%;"
                >
              <button
                  name="tool_selector_button_0"
                  id="tool_selector_button_0"
                  class="tool_selector_pane_button"
                  onclick="openPane(event, 'tool_selector_pane', 'id_139878023407200')"
                  type=button
                  >
                Air cleaners
                </button>
              </div>
            <div
                name="id_139878023209408"
                id="id_139878023209408"
                class="pane_space"
                >
              <div
                  name="id_139878023407200"
                  id="id_139878023407200"
                  class="tool_selector_pane"
                  >
                <img
                    title="Air cleaners"
                    name="air_cleaner_recommendations"
                    id="air_cleaner_recommendations"
                    style="display:flex;justify-content:center;align-items:center;margin:10px"
                    src="-"
                    alt=""
                    >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <script
        name="id_139878023600064"
        id="id_139878023600064"
        >
      form_update(document.getElementById("user_form"));
      document.getElementById("tool_selector_button_0").click();
      document.getElementById("input_selector_button_0").click();
      </script>
    </body>
  </html>
<script>
  initialise_tooltips();
  </script>
